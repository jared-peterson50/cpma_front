(this["webpackJsonpmern-auth"]=this["webpackJsonpmern-auth"]||[]).push([[0],{191:function(e,t,a){},192:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(66),o=a.n(l),c=a(3),u=a.n(c),s=a(8),m=a(2),i=a(15),d=a(12),p=a(4),h=a.n(p),E=Object(n.createContext)(null);function b(){var e=Object(n.useContext)(E),t=e.userData,a=e.setUserData,l=Object(d.f)();return r.a.createElement("nav",{className:"auth-options"},t.user?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return l.push("/coffee")}},"Coffee"),r.a.createElement("button",{onClick:function(){return l.push("/team")}},"Teams"),r.a.createElement("button",{onClick:function(){return l.push("/scoreboard")}},"Scoreboard"),r.a.createElement("button",{onClick:function(){return l.push("/student")}},"Student"),r.a.createElement("button",{onClick:function(){return l.push("/admin")}},"Admin"),r.a.createElement("button",{onClick:function(){a({token:void 0,user:void 0}),localStorage.setItem("auth-token","")}},"Log out")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return l.push("/register")}},"Register"),r.a.createElement("button",{onClick:function(){return l.push("/login")}},"Log in")))}function f(){return r.a.createElement("header",{id:"header"},r.a.createElement(i.b,{to:"/"},r.a.createElement("h1",{className:"title"},"ASU Marketing Coffee Shop")),r.a.createElement(b,null))}function g(e){return r.a.createElement("div",{className:"error-notice"},r.a.createElement("span",null,e.message),r.a.createElement("button",{onClick:e.clearError},"X"))}function v(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(),c=Object(m.a)(o,2),i=c[0],p=c[1],b=Object(n.useState)(),f=Object(m.a)(b,2),v=f[0],k=f[1],j=Object(n.useContext)(E).setUserData,x=Object(d.f)(),O=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:i},e.next=5,h.a.post("http://localhost:3000/users/login",n);case 5:r=e.sent,j({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),x.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&k(e.t0.response.data.msg);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Log in"),v&&r.a.createElement(g,{message:v,clearError:function(){return k(void 0)}}),r.a.createElement("form",{className:"form",onSubmit:O},r.a.createElement("label",{htmlFor:"login-email"},"Email"),r.a.createElement("input",{id:"login-email",type:"email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",{htmlFor:"login-password"},"Password"),r.a.createElement("input",{id:"login-password",type:"password",onChange:function(e){return p(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Log in"})))}var k=a(25),j=a.n(k);function x(){var e=Object(n.useContext)(E).userData,t=e.token,a=Object(n.useState)(),l=Object(m.a)(a,2),o=l[0],c=l[1],i=function(){var e=Object(s.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n=document.getElementById("textBoxDel").value,r={headers:{"x-auth-token":t,user:n}},e.next=6,h.a.delete("http://localhost:3000/users/delete",r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("error in the delete user: "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(s.a)(u.a.mark((function e(a){var n,l,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,h.a.get("http://localhost:3000/users/UserList",{headers:{"x-auth-token":t}});case 4:n=e.sent;try{l=Object.values(n.data),o=l.map((function(e){return r.a.createElement("div",{key:e._id},"_id: ",e._id," name: ",e.displayName," email: ",e.email," teamName:",e.teamNumber)})),console.log(o),alert("halt"),c(o)}catch(u){console.log("error happend generating user list: "+u)}e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return e.user?"admin"===e.user.role?r.a.createElement("div",null,"Welcome to the Admin page",r.a.createElement("h2",null,r.a.createElement("button",{onClick:d},"see all users")),r.a.createElement("div",null,o),r.a.createElement("div",null," to delete a user, paste _id of user",r.a.createElement("input",{type:"text",id:"textBoxDel"}),r.a.createElement("button",{onClick:i},"Submit")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(j.a,{handleFiles:function(e){console.log("test");var t=new FileReader;t.onload=function(e){alert(t.result)},t.readAsText(e[0]),console.log(typeof t.result)},fileTypes:".csv"},r.a.createElement("button",null,"Upload")))):e.user?r.a.createElement("h2",null,"not an admin "):void 0:r.a.createElement(v,null)}function O(){var e=Object(n.useContext)(E).userData;return e.user?"admin"===e.user.role?r.a.createElement(x,null):e.user?r.a.createElement("h1",null,"Welcome ",e.user.displayName," to the Home page "):void 0:r.a.createElement(v,null)}function C(){var e=Object(n.useState)(),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(),c=Object(m.a)(o,2),i=c[0],p=c[1],b=Object(n.useState)(),f=Object(m.a)(b,2),v=f[0],k=f[1],j=Object(n.useState)(),x=Object(m.a)(j,2),O=x[0],C=x[1],y=Object(n.useState)(),S=Object(m.a)(y,2),N=S[0],w=S[1],D=Object(n.useState)(),T=Object(m.a)(D,2),F=T[0],U=T[1],A=Object(n.useState)(),I=Object(m.a)(A,2),L=I[0],W=I[1],_=Object(n.useContext)(E).setUserData,R=Object(d.f)(),B=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,n={email:a,password:i,passwordCheck:v,displayName:O,teamName:N,teamNumber:F},console.log("team number: "+n.teamNumber),e.next=6,h.a.post("http://localhost:3000/users/register",n);case 6:return e.next=8,h.a.post("http://localhost:3000/users/login",{email:a,password:i});case 8:r=e.sent,_({token:r.data.token,user:r.data.user}),localStorage.setItem("auth-token",r.data.token),R.push("/"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),e.t0.response.data.msg&&W(e.t0.response.data.msg);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"page"},r.a.createElement("h2",null,"Register"),L&&r.a.createElement(g,{message:L,clearError:function(){return W(void 0)}}),r.a.createElement("form",{className:"form",onSubmit:B},r.a.createElement("label",{htmlFor:"register-email"},"Email"),r.a.createElement("input",{id:"register-email",type:"email",onChange:function(e){return l(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-password"},"Password"),r.a.createElement("input",{id:"register-password",type:"password",onChange:function(e){return p(e.target.value)}}),r.a.createElement("input",{type:"password",placeholder:"Verify password",onChange:function(e){return k(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-display-name"},"Display name"),r.a.createElement("input",{id:"register-display-name",type:"text",onChange:function(e){return C(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-team-name"},"Team name"),r.a.createElement("input",{id:"register-team-name",type:"text",onChange:function(e){return w(e.target.value)}}),r.a.createElement("label",{htmlFor:"register-team-number"},"Team number"),r.a.createElement("input",{id:"register-team-number",type:"text",onChange:function(e){return U(e.target.value)}}),r.a.createElement("input",{type:"submit",value:"Register"})))}var y=a(69);function S(){var e=Object(n.useContext)(E).userData;return e.user?r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",e.user.displayName," to the scoreboard page "),r.a.createElement("div",null,r.a.createElement(y.Line,{data:{labels:["Scenario 1","Scenario 2","Scenario 3","Scenario 4","Scenario 5"],datasets:[{label:"Team 4",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(255,0,0,1)",borderWidth:2,data:[65,59,80,81,56]},{label:"Team 14",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,255,0,1)",borderWidth:2,data:[51,87,91,67,71]},{label:"Team 27",fill:!1,lineTension:.5,backgroundColor:"rgba(75,192,192,1)",borderColor:"rgba(0,0,255,1)",borderWidth:2,data:[61,74,67,84,65]}]},options:{title:{display:!0,text:"Scores for Top 3 Teams",fontSize:20},legend:{display:!0,position:"right"}}}))):r.a.createElement(v,null)}var N=a(38);function w(){var e,t=Object(n.useContext)(E).userData;t.token;return t.user?r.a.createElement("div",null,r.a.createElement("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js"}),r.a.createElement("h1",null,"Welcome ",t.user.displayName," to the coffee page "),r.a.createElement("iframe",(e={id:"test",frameborder:"0",width:"75%",height:"500px",src:"https://repl.it/@AlecDonovan1/CPMATemplate?lite=true"},Object(N.a)(e,"frameborder","200"),Object(N.a)(e,"margin","-100px"),e)),r.a.createElement(j.a,{handleFiles:function(e){console.log("here");var t=[0,0,0,0,0,0,0,0,0,0],a=new FileReader;a.onload=function(e){alert(a.result),t=a.result.split("\n");for(var n=0;n<t.length;n++)t[n]=Number(t[n]);console.log(t)},a.readAsText(e[0]),console.log(a.result);for(var n=document.getElementById("table"),r='<table id = "table">',l=1;l<=10;l++)r+="<tr id = 'coffee"+l+"'>",r+="<td>Coffee "+l+"</td>",r+='<td contenteditable = "true">'+t[l-1]+"</td></tr>";r+="</table>",n.innerHTML=r},fileTypes:".csv"},r.a.createElement("button",null,"Upload")),r.a.createElement("table",{id:"table"})):r.a.createElement(v,null)}function D(){var e=Object(n.useContext)(E).userData,t=e.token,a=Object(n.useState)(),l=Object(m.a)(a,2),o=l[0],c=l[1];console.log(t);var i=function(){var a=Object(s.a)(u.a.mark((function a(n){var l,o,s,m,i,p,E;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h.a.get("http://localhost:3000/users/UserList",{headers:{"x-auth-token":t}});case 2:for(l=a.sent,o=Object.values(l.data),s=o.map((function(e){return r.a.createElement("div",{key:e._id},"_id: ",e._id," name: ",e.displayName," email: ",e.email," teamName:",e.teamNumber)})),console.log(s),m=[],p=0;p<s.length;p++)0===s[p].props.children[1].localeCompare(e.user.id)&&(i=s[p].props.children[7]);for(E=0;E<s.length;E++)s[E].props.children[7]==i&&m.push(s[E]);return c(m),a.abrupt("return",d);case 11:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),d=function(e){if(console.log(e),!e)return r.a.createElement("tr",null);var t=[];console.log(e);for(var a=0;a<e.length;a++)t[a]=r.a.createElement("tr",null,r.a.createElement("td",null,e[a].props.children[3]),r.a.createElement("td",null,e[a].props.children[5]),r.a.createElement("td",null,e[a].props.children[7]));return t};return e.user?r.a.createElement("div",null,r.a.createElement("h2",null,"Team info page"),r.a.createElement("h2",null,r.a.createElement("button",{onClick:i},"see all users")),r.a.createElement("div",null,console.log(o)),r.a.createElement("table",{id:"student-info"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Team Number"))),r.a.createElement("tbody",null,d(o)))):r.a.createElement(v,null)}function T(){var e=Object(n.useContext)(E).userData;return e.user?r.a.createElement("div",null,r.a.createElement("h1",null,"Welcome ",e.user.displayName," to the team page "),r.a.createElement(D,null)):r.a.createElement(v,null)}function F(){var e=Object(n.useContext)(E).userData;return"1",alert(e.user.displayName),console.log("1"),e.user?r.a.createElement("div",null,r.a.createElement("h2",null,"Student info page"),r.a.createElement("table",{id:"student-info"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Team Name"),r.a.createElement("th",null,"Team Number"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,e.user.displayName),r.a.createElement("td",null,e.user.email),r.a.createElement("td",null,e.user.teamName),r.a.createElement("td",null,e.user.teamNumber))))):r.a.createElement(v,null)}a(191);function U(){var e=Object(n.useState)({token:void 0,user:void 0,role:"2"}),t=Object(m.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){document.title="ASU Marketing Coffee Shop",function(){var e=Object(s.a)(u.a.mark((function e(){var t,a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,h.a.post("http://localhost:3000/users/tokenIsValid",null,{headers:{"x-auth-token":t}});case 4:if(a=e.sent,console.log("token: ",t),!a.data){e.next=12;break}return e.next=9,h.a.get("http://localhost:3000/users/",{headers:{"x-auth-token":t}});case 9:n=e.sent,console.log("userRES!!!",n),l({token:t,user:n.data});case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,null,r.a.createElement(E.Provider,{value:{userData:a,setUserData:l}},r.a.createElement(f,null),r.a.createElement("div",{className:"container"},r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:O}),r.a.createElement(d.a,{path:"/login",component:v}),r.a.createElement(d.a,{path:"/register",component:C}),r.a.createElement(d.a,{path:"/admin",component:x}),r.a.createElement(d.a,{path:"/scoreboard",component:S}),r.a.createElement(d.a,{path:"/team",component:T}),r.a.createElement(d.a,{path:"/coffee",component:w}),r.a.createElement(d.a,{path:"/student",component:F}))))))}o.a.render(r.a.createElement(U,null),document.querySelector("#root"))},70:function(e,t,a){e.exports=a(192)}},[[70,1,2]]]);
//# sourceMappingURL=main.77b54fa4.chunk.js.map